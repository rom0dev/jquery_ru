---
categories: 
title: "Настройка WiFi Tp-Link Archer T9UH в Ubuntu Server 24.04"
date: 2024-04-26 00:00:00
---

Из ядра давно убрали драйвер для этого WiFi, но его можно поставить самостоятельно из исходных кодов.

[На официальном сайте](https://www.tp-link.com/ru/support/download/archer-t9uh/) драйвера есть только для Windows и Mac. Там же [есть инструкция](https://static.tp-link.com/2018/201812/20181207/Installation%20Guide%20for%20Linux.pdf) для установки под Ubuntu 16.04.

Рекомендую устанавливать драйвер через [dkms](https://ru.wikipedia.org/wiki/Dynamic_Kernel_Module_Support). Так при обновлении ядра он пересоберётся и установится автоматически.

Для этого устанваливаем неоходимые зависимости: ```sudo apt install -y dkms git build-essential```

Переходим в место, где должны хранится все исходные коды программ, которые пользователь собирает самостоятельно: ```cd /usr/src```

Клонируете понравившуюся вам версию драйвера (см "Полезности" внизу поста).

Перейдите в каталог с драйвером. Я выбрал драйвер с версией посвежее: ```cd ~/src/8814au```

Этот вариант лёгок в установке: достаточно запустить скрипт ```install-driver.sh```. Он может поругать вас, что не в системе не установлены некоторые необходимые программы. Доустановите их. (iw, rfkill)

После сборки скрипт спросит хотим ли мы изменить параметры драйвера. Если вы знаете, что надо менять, то межете ответить Y :) В том же файле всё хорошо расписано. Я отключил power managment.
Конфигурацию можно поправить в файле ```/etc/modprobe.d/8814au.conf```

На следующем шаге скрипт спросит хотите ли вы применить новые параметры и перезагрузиться.

После перезагрузки можете посмотреть работает драйвер или нет командой ```iw list```. Вы должны получить простыню со всеми параметрами донгла.

# Полезности:

* lsusb должен показать, что донгл подключен: ```Bus 001 Device 006: ID 2357:0106 TP-Link Archer T9UH v1 [Realtek RTL8814AU]```
* Различные версии драйвера:
    * Версия от [aircrack](https://github.com/aircrack-ng/rtl8812au), которая используется в Kali Linux ```git clone -b v5.6.4.2 https://github.com/aircrack-ng/rtl8812au.git```
    * [Более свежая вресия](https://github.com/morrownr/8814au) чем от aircrack
* [Инструкция](https://easylinuxtipsproject.blogspot.com/p/realtek.html) для этого и других чипов Realtek
* [Здесь](https://ostechnix.com/install-tp-link-ac600-archer-t2u-nano-wifi-usb-adapter-in-linux/) описана сборка для RedHat и Suse дистрибьютивов.
